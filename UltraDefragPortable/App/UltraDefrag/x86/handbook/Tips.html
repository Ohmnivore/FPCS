<!-- HTML header for doxygen 1.8.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<meta name="keywords" content="UltraDefrag, Ultra Defragmenter, defragmentation, Open Source disk defragmenter, defragger, boot time defragmentation, boot time defragger, handbook, user manual, index, table of contents, TOC" />
<title>UltraDefrag Handbook: Tips and Tricks - 6.0.2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%; height: 100%">
 <tbody>
 <tr>
  <td id="projectlogo"><a href="http://ultradefrag.sourceforge.net/"><img alt="ultradefrag homepage" src="udefrag80x15-colored-light.gif"/></a></td>
  <td id="sourceforgelogo"><a href="http://sourceforge.net/p/ultradefrag"><img alt="ultradefrag project" src="sflogo.gif"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname"><a href="index.html" class="index_pointer">UltraDefrag Handbook</a>
   &#160;<span id="projectnumber">6.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Tips.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Tips and Tricks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Performance Considerations</h1>
<h3><small>•</small> Initial usage</h3>
<p>Before any disk defragmentation we recommend to disable the Windows paging file. It expands RAM, but works much slower. So, its removing will take much bigger effect on system performance than the disk defragmentation. If more RAM is needed than physically installed, setting up additional RAM modules always gives the best result.</p>
<p>Then, if you'd like to keep some files close to the beginning of the disk because of the highest speed of this area, don't ask the disk defragmenter for this job: just <a href="http://gparted.sourceforge.net/">repartition</a> the disk and use the first partition to keep the most frequently accessed files while the second partition - for backups, videos, music and other stuff tolerant for a bit slower access.</p>
<h3><small>•</small> How frequently to defragment?</h3>
<p>Defragment your system disk only when you notice a system slowdown - approximately on a monthly basis, not frequently. Data drives have even less need to be defragmented, especially if they contain primarily music, pictures and videos.</p>
<p>Optimization is reasonable when you have free space heavily fragmented on your system disk. To determine whether to run optimizer or not execute the analysis and look at the cluster map. If you see white space heavily scattered around the disk - it's time for an optimization. However, it isn't recommended to optimize disks too frequently. Run it once a year or so since it may take a lot of time.</p>
<p>And, once again, don't crave to defragment/optimize data files - music/video has no need to be continues on disk, other data files have tendency for temporary living on the disk.</p>
<h3><small>•</small> Performance of UltraDefrag from best to worst</h3>
<dl class="section user"><dt>Running at Boot Time</dt><dd>this is the fastest, since there are no other processes running</dd></dl>
<dl class="section user"><dt>Running in Safe Mode</dt><dd>here are only a limited number of processes running, which are essential to operate Windows</dd></dl>
<dl class="section user"><dt>Running with Anti-virus Software disabled</dt><dd>read and write operations are not interrupted by the AV process</dd></dl>
<dl class="section user"><dt>Running when the System is fully used</dt><dd>this is the worst and not recommended at all, since many files are locked by running applications. You should never use this to process entire disks.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>You must disable your virus detection software before using UltraDefrag. Any virus scanner running during the defragmentation extremely slows down the process.</dd></dl>
<p>Some Anti-virus programs allow to exclude processes from being monitored, if your Anti-virus program supports this, you can use it instead of disabling it completely. You may still encounter slower performance compared to running UltraDefrag at boot or in safe mode.</p>
<p>We recommend to exclude as much files as possible from defragmentation - this will dramatically decrease the defragmentation time. Temporary files and archives are usually rarely accessed and may be left fragmented without a noticeable system performance degradation.</p>
<h1>Hardware Considerations</h1>
<h3><small>•</small> Flash and SSD drives</h3>
<p>The use of disk defragmentation is not recommended on <a href="http://en.wikipedia.org/wiki/Flash_memory">flash memory</a> or <a href="http://en.wikipedia.org/wiki/Solid-state_drive">solid-state drives</a> (SSD), as it may reduce the lifespan of the drive. As flash memory does not rely on physical movement to read the drive, random file access is much faster than a mechanical hard drive, so defragmentation is not necessary.</p>
<p>On the other hand, flash drives defragmentation increases their potential for recovery as mentioned <a href="http://sourceforge.net/p/ultradefrag/discussion/709672/thread/7f71fff6">in our forum</a>.</p>
<h3><small>•</small> Floppy drives</h3>
<p>Floppy drives defragmentation is not recommended, because it always reduces the lifespan of the floppies.</p>
<h3><small>•</small> Checking the file system</h3>
<p>Freshly used drives can be defragmented immediately; any drive, which has been in use for a long time without maintenance, should be checked for consistency first: </p>
<dl class="section user"><dt>CHKDSK {Drive:} /F /V</dt><dd>this checks the drive and repairs it if needed</dd></dl>
<dl class="section user"><dt>CHKDSK {Drive:} /R /F /V</dt><dd>this checks the drive, repairs it and collects lost clusters if needed (takes quite long, but is the safest)</dd></dl>
<h3><small>•</small> Parallel processing</h3>
<p>You can process multiple disks simultaneously, but only if they are located on different hard-disks. Processing multiple disks located on the same physical hard-disk will increase processing time significantly.</p>
<p>Example:</p>
<ul>
<li>Hard-disk 1 contains disks C: and D:</li>
<li>Hard-disk 2 contains disks G: and H:</li>
</ul>
<p>You can start one UltraDefrag session to process disks C: and D: and a second separate session to process disks G: and H:<br/>
 This will result in less time needed to process all four disks. If both hard-disks are occupied in a similar way the time will be reduced to about 50% compared to the time needed for all disks to be processed one after the other.</p>
<h1>Caveats</h1>
<h3><small>•</small> Repeated defragmentation</h3>
<p>Highly fragmented disks will have to be defragmented several times until you will see an improvement.</p>
<h3><small>•</small> Prevent the system from endless boot processing</h3>
<p>To prevent the system from a situation where it is not possible to boot into Windows, it is best to turn off boot processing at the top of the boot-time-script. This is done with the <b>boot-off</b> command. The boot processing is still executed, but the next boot will not cause another run of the boot time interface.</p>
<h3><small>•</small> Cleaning up the USN journal</h3>
<p>Sometimes a fragmented USN journal can prevent UltraDefrag from consolidating free space. In such a case you can remove the USN journal by executing the <a href="http://technet.microsoft.com/en-us/library/cc788042%28WS.10%29.aspx">fsutil</a> command as shown below from an administrative command prompt. It is recommended to recreate the USN journal after the drive has been processed.</p>
<dl class="section user"><dt>Query USN journal</dt><dd>Use the command line below to get the current settings of the USN journal of drive C:. Write them down to use them for recreating the USN journal. <div class="fragment"><div class="line">fsutil usn queryjournal C:</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Delete USN journal</dt><dd>Use the command line below to delete the USN journal of drive C:. <div class="fragment"><div class="line">fsutil usn deletejournal /n C:</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Create USN journal</dt><dd>Use the command line below to create the USN journal of drive C:. A reasonable size of the USN journal is 85MB for each 100GB, the delta should be between  
<sup>1</sup>/<sub>8</sub>
  and  
<sup>1</sup>/<sub>4</sub>
  of the maximum size. The default values are usually 32MB maximum size and 4MB delta. The example creates an USN journal of default size. <div class="fragment"><div class="line">fsutil usn createjournal m=33554432 a=4194304 C:</div>
</div><!-- fragment --></dd></dl>
 
<HR>
 <TABLE STYLE="border: none; width: 97%; margin:auto;">
   <TR>
     <TD STYLE="text-align: left; width: 50%;">Previous: <a href="Reports.html">File Fragmentation Reports</a></TD>
     <TD STYLE="text-align: right; width: 50%;">Next: <a href="FAQ.html">Frequently Asked Questions</a></TD>
   </TR>
 </TABLE>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
